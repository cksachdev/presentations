import { Image, Appear } from 'mdx-deck'
import { dark } from 'mdx-deck/themes'
import { Split } from 'mdx-deck/layouts'
import codeSurfer from 'prism-react-renderer/themes/nightOwl'
export { components } from 'mdx-deck-code-surfer'
import { CodeSurfer } from 'mdx-deck-code-surfer'
import dracula from 'prism-react-renderer/themes/dracula'

export const theme = {
  ...dark,
  codeSurfer,
  monospace: '"Dank Mono", Consolas, "Roboto Mono", monospaced',
  colors: {
    text: 'rgb(214, 222, 235)',
    code: 'rgb(130, 170, 255)',
    link: 'rgb(128, 203, 196)',
    background: 'rgb(1, 22, 39)',
  },
}

## CSV to Questions 👋🏼

---

<CodeSurfer
  title="question types"
  code={require('!raw-loader!./code/questiontype.js')}
  lang="javascript"
  showNumbers={true}
  theme={dracula}
  height="400"
/>
---
<CodeSurfer
  title="question body"
  code={require('!raw-loader!./code/qbody.js')}
  lang="javascript"
  showNumbers={true}
  theme={dracula}
  height="400"
/>
---
<CodeSurfer
  title="question object"
  code={require('!raw-loader!./code/questionobject.js')}
  lang="javascript"
  showNumbers={true}
  theme={dracula}
  height="400"
/>
---
## Questions to QuestionSet 👋🏼
---
<CodeSurfer
  title="ecml content"
  code={require('!raw-loader!./code/contentTemplate.js')}
  lang="javascript"
  showNumbers={true}
  theme={dracula}
  height="400"
  steps={[
    { notes: 'ecml content structure' },
    { range: [1, 20], notes: 'first 20 lines' },
    { range: [21, 40], notes: 'next 20' },
    { range: [41, 60], notes: 'next 20' },
    { range: [61, 80], notes: 'next 20' },
    { range: [81, 100], notes: 'next 20' },
    { range: [100, 423], notes: 'next 20' },
  ]}
/>

## QuestionSet to Content 👋🏼

---

<CodeSurfer
  title="ecml content"
  code={require('!raw-loader!./code/ecml.js')}
  lang="javascript"
  showNumbers={true}
  theme={dracula}
  steps={[
    { notes: 'content.js' },
    { range: [6, 28], notes: 'only stage object in Worksheet' },
    { range: [12, 12], notes: 'generate new uuid for this stage using uuidv4' },
    { range: [5, 5], notes: 'Set stage[0] id as startstage id' },
    { range: [28, 28], notes: 'iterate through all question do ids' },
    {
      range: [18, 26],
      notes: 'extract list of assets and populate in manifest media array',
    },
    {
      range: [153, 157],
      notes: 'same need to be populated in stage manifest media array',
    },
  ]}
  height="400"
/>

---

```js Steps
How to test and ensure ECML generated by script matches the ECML generated by ContentEditor:
1. Create a content with 5 different question templates we have and copy the ecml using
copy(org.ekstep.contenteditor.stageManager.toECML()) and paste in Kdiff3
2. Create a newContent object to treat it as a new content
3. Iterate through stage to generate a new stageid
4. Set startStage of content to stage[0]’s id
5. Populate Questions in QuestionSet object
6. Copy newContent object and compare with ECML created in Step 1
7. Refactor and identify Step 7
----
* > steps*
2 > Step 1
4 > Step 2
```

---

<CodeSurfer
  title="save payload"
  code={require('!raw-loader!./code/savepayload.js')}
  lang="javascript"
  showNumbers={true}
  theme={dracula}
  steps={[
    { notes: 'save payload.js' },
    {
      range: [1, 3],
      notes: 'content block',
    },
    {
      range: [28, 31],
      notes: 'body',
    },
    {
      range: [7, 14],
      notes: 'what is the use of?',
    },
  ]}
  height="400"
/>

---

# Thanks! ☺️

---

<Image src={require('file-loader!./img/ending.png')} />
